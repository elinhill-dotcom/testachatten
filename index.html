<!doctype html>
<html lang="sv">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Examensprojekt ‚Äì Chattbot</title>

    <!-- liten favicon s√• vi slipper 404 -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üí¨</text></svg>">

    <!-- Botpress Webchat (enligt dokumentationen) -->
    <script src="https://cdn.botpress.cloud/webchat/v3.3/inject.js"></script>
    <script src="https://files.bpcontent.cloud/2025/10/09/09/20251009094625-N1NGCKAW.js" defer></script>

    <style>
      :root { --max: 760px; }
      * { box-sizing: border-box; }
      body {font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin:0; background:#fafafa; color:#111;}
      .wrap {max-width: var(--max); margin: 0 auto; padding: 3rem 1rem 6rem;}
      h1 {font-size: clamp(1.8rem, 3vw, 2.2rem); margin: 0 0 .75rem;}
      p, li {line-height: 1.6;}
      .card {
        background:#fff; border:1px solid #eaeaea; border-radius:16px; padding: 1.25rem 1.25rem;
        box-shadow: 0 1px 2px rgba(0,0,0,.04);
      }
      .note {font-size:.95rem; opacity:.85}
      footer {opacity:.6; font-size:.9rem; margin-top:1.25rem}

      /* Se till att widget/bubblan verkligen syns √∂verst till h√∂ger/h√∂ger-nere */
      .bpw-floating-button, .bpw-widget-container, iframe[name="webchat"] {
        position: fixed !important;
        z-index: 2147483000 !important;
        right: 16px !important;
        bottom: 16px !important;
        opacity: 1 !important;
        visibility: visible !important;
        pointer-events: auto !important;
      }
    </style>
  </head>

  <body>
    <main class="wrap">
      <h1>Testa v√•r kundservice-chatt</h1>

      <section class="card">
        <p><strong>Hej!</strong> Tack f√∂r att du hj√§lper oss i v√•rt examensarbete i medie- och kommunikationsvetenskap.
          Det h√§r √§r ett test av en kundservicechatt ‚Äì allt √§r fiktivt men ska likna en riktig kundservicekonversation.</p>

        <p><strong>Din uppgift:</strong> f√∂rs√∂k returnera ett par jeans som inte passade.
          <strong>Du har ordernummer 12345.</strong></p>

        <p class="note">N√§r chatten √§r klar klickar du p√• l√§nken till enk√§ten och fyller i formul√§ret (l√§nken visas i chatten).</p>

        <ul>
          <li><strong>Tid:</strong> ca 3‚Äì5 minuter.</li>
          <li><strong>Anonymitet:</strong> din medverkan √§r helt anonym, och inga personuppgifter samlas in. Du kan avbryta n√§r som helst.</li>
        </ul>
      </section>

      <footer>Chattbubblan finns nere i h√∂rnet.</footer>
    </main>

    <!-- Visa widgeten n√§r den √§r redo + fallback -->
    <script>
      (function () {
        function showChat() {
          try {
            if (window.botpressWebChat && typeof window.botpressWebChat.sendEvent === 'function') {
              window.botpressWebChat.sendEvent({ type: 'show' });
            } else if (window.botpressWebChat && typeof window.botpressWebChat.toggle === 'function') {
              window.botpressWebChat.toggle(true);
            }
          } catch (e) { /* no-op */ }
        }

        // Botpress skickar ett "ready"-event fr√•n iframen; f√•nga olika varianter
        window.addEventListener('message', function (evt) {
          const t = evt && evt.data && (evt.data.type || evt.data.event);
          if (t === 'webchatReady' || t === 'WEBCHAT_READY' || t === 'webchat:ready') {
            showChat();
          }
        });

        // Fallback om eventet missas: f√∂rs√∂k visa efter 1,2s och igen efter 3s
        window.addEventListener('load', function () {
